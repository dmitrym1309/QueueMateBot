# Установка

Существует несколько способов установки и запуска QueueMateBot. Выберите подходящий вам вариант.

## Стандартная установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/QueueMateBot.git
cd QueueMateBot
```

2. Создайте и активируйте виртуальное окружение (опционально, но рекомендуется):
```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# Linux/Mac
source .venv/bin/activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` с токеном бота:
```
BOT_TOKEN=ваш_токен_бота
```

5. Запустите бота:
```bash
python main.py
```

## Установка с использованием setuptools

Проект можно установить с помощью setuptools для более удобного управления:

1. Установка проекта в режиме разработки:
```bash
pip install -e .
```

2. Создание пакета:
```bash
python setup.py sdist bdist_wheel
```

3. Установка из созданного пакета:
```bash
pip install dist/QueueMateBot-*.whl
```

4. После установки бот можно запустить командой:
```bash
queuemate-bot
```

## Установка и запуск с использованием Docker

Для удобного развертывания и запуска бота вы можете использовать Docker:

### Предварительные требования

1. Установите [Docker](https://www.docker.com/products/docker-desktop/) и Docker Compose на вашу систему

### Запуск с помощью Docker

1. Клонируйте репозиторий и перейдите в директорию проекта:
```bash
git clone https://github.com/yourusername/QueueMateBot.git
cd QueueMateBot
```

2. **Настройте токен бота**. Создайте файл `.env` в корневой директории проекта и добавьте в него ваш `BOT_TOKEN`.
   ```
   BOT_TOKEN=ваш_уникальный_токен_бота
   ```
   Подробнее о настройке файла `.env` и получении токена см. в разделах [Настройка файла .env](#настройка-файла-env) и [Получение токена бота](#получение-токена-бота) ниже на этой странице. **Это обязательный шаг.**

3. Запустите бота с помощью Docker Compose:
```bash
docker-compose up -d
```

Флаг `-d` запускает контейнер в фоновом режиме.

### Управление ботом в Docker

- **Просмотр логов**:
```bash
docker-compose logs
```
Для просмотра логов в реальном времени:
```bash
docker-compose logs -f
```

- **Остановка бота**:
```bash
docker-compose down
```

- **Перезапуск бота** (например, после изменения кода):
```bash
docker-compose restart
```
Или полностью пересоберите и перезапустите:
```bash
docker-compose up -d --build
```

### Хранение данных в Docker

При использовании предоставленной конфигурации Docker Compose (`docker-compose.yml`), данные бота (база данных `botdb.db` и лог-файл `bot.log`) сохраняются в **именованном Docker-томе** (по умолчанию `queuemate_bot_data`).

Это означает:
- Данные будут сохраняться между перезапусками и пересборками контейнера.
- Файлы `botdb.db` и `bot.log` **не будут** создаваться напрямую в директории вашего проекта на хост-машине. Они находятся внутри управляемого Docker-тома.
- Такой подход обеспечивает лучшую переносимость и предотвращает проблемы с путями файловой системы на разных операционных системах.

Если вам нужно полностью очистить данные (например, для начала с чистого листа), вы можете остановить контейнеры и удалить том командой:
```bash
docker-compose down -v
```
При следующем запуске (`docker-compose up -d`) том будет создан заново.

### Преимущества использования Docker

- **Изоляция** - бот работает в своей собственной среде, не влияя на вашу систему
- **Переносимость** - легко запускать на любой системе с Docker
- **Управляемость** - простое управление зависимостями и переменными окружения
- **Автоматический перезапуск** - бот будет автоматически перезапущен в случае сбоя

## Настройка файла .env

Файл `.env` должен содержать токен бота:

```
BOT_TOKEN=ваш_токен_бота
```

Вы можете скопировать пример файла `.env.example` и заполнить его:

```bash
cp .env.example .env
# Затем откройте .env в текстовом редакторе и добавьте свой токен
```

## Получение токена бота

Для получения токена бота:

1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. После завершения вы получите токен бота, который нужно скопировать в файл `.env`

## Настройка доступа администраторов

Управление очередями доступно только администраторам группового чата. Убедитесь, что:

1. Бот добавлен в групповой чат
2. Учетная запись, которая будет управлять очередями, имеет права администратора в этом чате 